<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.24.79"/><style data-styled="" data-styled-version="5.2.0">body{background-color:#282a36;width:80vw;font-family:'Space Mono';}/*!sc*/
h4{color:#8694b1;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
a{-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
a{color:#bd96f0;}/*!sc*/
a:hover{color:#282a36;background-color:#bd96f0;}/*!sc*/
img{width:100%;height:auto;}/*!sc*/
data-styled.g1[id="sc-global-fHsaqC1"]{content:"sc-global-fHsaqC1,"}/*!sc*/
.EzSst{padding:1rem;margin-left:25vw;color:white;width:65%;}/*!sc*/
.EzSst code{background-color:#363948;}/*!sc*/
data-styled.g4[id="post__StyledPost-sc-130zpan-0"]{content:"EzSst,"}/*!sc*/
</style><link href="https://fonts.googleapis.com/css?family=Space+Mono:400,700" rel="stylesheet"/><link as="script" rel="preload" href="/webpack-runtime-9ba3d4953038f13ac4c6.js"/><link as="script" rel="preload" href="/framework-256fdde5199f9087be1b.js"/><link as="script" rel="preload" href="/app-8a286143b40e5b6c2ec4.js"/><link as="script" rel="preload" href="/commons-865c6a758ed7e2eabd99.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-2e551a17ad0a31f82dae.js"/><link as="fetch" rel="preload" href="/page-data/posts/updating-sloth.pics/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><a href="/"><h4>// Technicode.io</h4></a><h4>// All things Tech and Code</h4><div class="post__StyledPost-sc-130zpan-0 EzSst"><h1>Updating Sloth.Pics</h1><p>Sat Dec 12 2020</p><div><p>A while ago I was looking for an API that would return a random image of a sloth for another project I wanted to build. It didn't take me too long to realize this API didn't exist, so I decided to build it myself! You can read more about this project <a href="https://technicode.io/posts/sloth.pics">here</a>. But a quick run down, I'm pulling 500 images from <a href="https://creativecommons.org/">Creative Commons</a>, passing them to AWS Rekognition and checking if if the label 'sloth' shows up with at least a 75% confidence rating, and if so then saving the image's information to an Mlab database.</p>
<p>Mlab is a document based cloud database which was acquired by MongoDB in 2011. It had a great free tier for small projects which worked great for my needs. However, a couple months after I finished building sloth.pics, Mlab announced that on December 9th they'd be wiping their data and that users who want to keep their data would need to migrate to MongoDB Atlas which also has a free tier. So over the past week I've been looking into ways to keep the database up and running since it's being used frequently by <a href="https://twitter.com/slotheveryhour">@SlothEveryHour</a>, a project you can read more about <a href="https://technicode.io/posts/sloth-every-hour">here</a>.</p>
<p>I decided to go with MongoDB Atlas but instead of just migrating my data over, I wanted to start fresh so I can add more images to the database without creating duplicates as my image collection function currently isn't capable of distinguishing duplicates. Luckily Mlab's databases were accessible through the MongoDB npm package so aside from updating my collection function from making use of Creative Commons pagination, all i really needed to do was create the Atlas db, get my new Mongo URI, and replace my database URI environment variable.</p>
<p>Then once I confirmed my db is connected successfully, I went ahead and started adjusting my collection function to make use of the pagination. CC's pagination works by adding a parameter to the query string, 'page' and a value of which ever page you'd like to access. And since i'm specifying the max image count of 500 on my query, if I iterate through the pages I can get a great deal more than I had previously.</p>
<p>I ended up iterating through 3 pages which gave me 1500 images to pass to AWS, and after the image recognition, I had over 600 images which were confirmed sloth images. This was much better than the 200 images I had from my initial CC image pull.</p>
<p>For the time being, Sloth.pics should be stable and continue providing sloth images for everyone who needs them. When I have the time I'd love to give the site a bit of a face lift as I had put it together when I was not as familiar with full stack development. Adding it to the list! If you'd like to make use of the API, feel free to check it out at <a href="https://sloth.pics">Sloth.Pics</a>!</p></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/updating-sloth.pics";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-177f0ce798b672df6e51.js"],"app":["/app-8a286143b40e5b6c2ec4.js"],"component---src-pages-index-js":["/component---src-pages-index-js-426671a7be08568aa1e5.js"],"component---src-templates-post-js":["/component---src-templates-post-js-2e551a17ad0a31f82dae.js"]};/*]]>*/</script><script src="/polyfill-177f0ce798b672df6e51.js" nomodule=""></script><script src="/component---src-templates-post-js-2e551a17ad0a31f82dae.js" async=""></script><script src="/commons-865c6a758ed7e2eabd99.js" async=""></script><script src="/app-8a286143b40e5b6c2ec4.js" async=""></script><script src="/framework-256fdde5199f9087be1b.js" async=""></script><script src="/webpack-runtime-9ba3d4953038f13ac4c6.js" async=""></script></body></html>